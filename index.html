<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Magic Arcade</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-pink: #ff00ff;
            --neon-blue: #00ffff;
            --neon-green: #39ff14;
            --neon-purple: #bc13fe;
            --neon-yellow: #fff01f;
            --bg-dark: #120520; /* Fondo violeta muy oscuro */
            --glass-bg: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
        
        body {
            margin: 0; padding: 0;
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Fredoka One', cursive; /* Fuente m√°s amable */
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Canvas de Fondo (Part√≠culas M√°gicas) */
        #bg-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.5;
        }

        /* --- PANTALLAS --- */
        .screen-container {
            display: none;
            flex-direction: column;
            height: 100%;
            width: 100%;
            animation: slideIn 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .screen-container.active { display: flex; }

        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* HEADER COM√öN */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; background: rgba(0,0,0,0.3); backdrop-filter: blur(5px);
            z-index: 10; border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        h1 { margin: 0; font-family: 'Orbitron', sans-serif; font-size: 1.5rem; letter-spacing: 1px; }

        .back-btn {
            background: rgba(255,255,255,0.1); border: 1px solid white; color: white;
            padding: 8px 15px; border-radius: 20px; cursor: pointer; font-family: 'Fredoka One';
        }

        /* --- MEN√ö PRINCIPAL --- */
        #main-menu { justify-content: center; align-items: center; text-align: center; gap: 30px; }
        #main-menu h1 {
            font-size: 3rem; color: var(--neon-pink);
            text-shadow: 0 0 20px var(--neon-pink), 0 0 60px var(--neon-purple);
            margin-bottom: 20px;
        }

        .menu-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
            border: 2px solid var(--neon-blue);
            padding: 20px; width: 85%; max-width: 350px; border-radius: 20px;
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
            display: flex; align-items: center; gap: 20px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }
        
        .menu-card:active { transform: scale(0.95); }
        
        .menu-icon { font-size: 3.5rem; filter: drop-shadow(0 0 10px rgba(255,255,255,0.5)); }
        .menu-text h2 { margin: 0; font-size: 1.4rem; color: white; text-align: left; }
        .menu-text p { margin: 5px 0 0 0; font-size: 0.9rem; color: #aaa; text-align: left; font-family: sans-serif; }

        /* Estilo especial para la tarjeta de U√±as */
        .menu-card.nails-theme { border-color: var(--neon-pink); box-shadow: 0 0 15px rgba(255, 0, 255, 0.2); }
        .menu-card.nails-theme h2 { color: var(--neon-pink); }

        #start-audio-btn {
            padding: 10px 20px; background: var(--neon-green); border: none; border-radius: 50px;
            color: #000; font-weight: bold; cursor: pointer; animation: pulse 1s infinite;
        }

        /* --- JUEGO 1: MEMORIA --- */
        #memory-board {
            display: grid; gap: 8px; padding: 15px;
            margin: auto; max-width: 500px; width: 100%;
            perspective: 1000px; align-content: center;
        }
        .card { position: relative; width: 100%; aspect-ratio: 1; cursor: pointer; }
        .card-inner {
            width: 100%; height: 100%; transition: transform 0.4s; transform-style: preserve-3d;
            border-radius: 10px; position: relative;
        }
        .card.flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            display: flex; align-items: center; justify-content: center; border-radius: 10px;
        }
        .card-front { background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.1); font-size: 2rem; }
        .card-back {
            background: #2a1b3d; border: 2px solid var(--neon-blue); transform: rotateY(180deg);
            font-size: 2.2rem; box-shadow: 0 0 15px var(--neon-blue);
        }
        /* Ajuste para modo extremo (cartas chicas) */
        .grid-6x6 .card-back { font-size: 1.2rem; border-width: 1px; }

        #diff-overlay {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(18, 5, 32, 0.95); z-index: 50;
            display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 15px;
        }
        .btn-game {
            background: transparent; border: 2px solid white; color: white;
            padding: 15px 40px; font-size: 1.2rem; border-radius: 50px; width: 250px;
            font-family: 'Fredoka One'; cursor: pointer;
        }
        .btn-neon-blue { border-color: var(--neon-blue); color: var(--neon-blue); box-shadow: 0 0 10px var(--neon-blue); }
        .btn-neon-pink { border-color: var(--neon-pink); color: var(--neon-pink); box-shadow: 0 0 10px var(--neon-pink); }
        
        /* --- JUEGO 2: SAL√ìN DE U√ëAS --- */
        #salon-container {
            flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            padding-bottom: 20px;
        }

        #hand-area {
            flex-grow: 1; width: 100%; display: flex; justify-content: center; align-items: center;
            position: relative;
        }

        /* La Mano CSS */
        .hand {
            display: flex; gap: 15px; transform: rotate(-5deg);
        }
        .finger {
            width: 50px; height: 180px;
            background: linear-gradient(to bottom, #ffdbac, #e0b084);
            border-radius: 40px; position: relative;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.5);
            display: flex; justify-content: center;
        }
        .finger:nth-child(1) { height: 140px; margin-top: 40px; } /* Me√±ique */
        .finger:nth-child(2) { height: 160px; margin-top: 20px; } /* Anular */
        .finger:nth-child(3) { height: 180px; margin-top: 0px; }  /* Medio */
        .finger:nth-child(4) { height: 160px; margin-top: 20px; } /* Indice */
        .finger:nth-child(5) { height: 130px; margin-top: 60px; transform: rotate(10deg); margin-left: 10px; } /* Pulgar */

        .nail {
            width: 36px; height: 45px;
            background-color: #ffeadd; /* Color natural */
            border-radius: 15px 15px 5px 5px;
            margin-top: 10px;
            cursor: pointer;
            transition: transform 0.1s;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.3);
        }
        .nail:active { transform: scale(0.9); }
        
        .sticker-on-nail {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 1.5rem; pointer-events: none;
        }

        /* Controles de Pintura */
        #tools-panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            width: 95%; border-radius: 20px; padding: 15px;
            display: flex; flex-direction: column; gap: 10px;
        }

        .tool-row { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        
        .color-swatch {
            width: 50px; height: 50px; border-radius: 50%; flex-shrink: 0;
            border: 3px solid transparent; cursor: pointer;
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
        }
        .color-swatch.selected { border-color: white; transform: scale(1.1); }

        .sticker-option {
            font-size: 2rem; padding: 5px; background: rgba(255,255,255,0.1);
            border-radius: 10px; cursor: pointer; min-width: 50px; text-align: center;
            border: 2px solid transparent;
        }
        .sticker-option.selected { border-color: var(--neon-yellow); background: rgba(255,255,255,0.2); }

        .tool-label { font-size: 0.8rem; color: #ccc; margin-left: 5px; text-transform: uppercase; letter-spacing: 1px; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

    </style>
</head>
<body>
    <canvas id="bg-canvas"></canvas>

    <div id="main-menu" class="screen-container active">
        <div>
            <h1>NEON<br>MAGIC</h1>
            <button id="start-audio-btn" onclick="initAudio()">ACTIVAR SONIDO ‚ú®</button>
        </div>

        <div class="menu-card" onclick="enterGame('memory')">
            <div class="menu-icon">üß†</div>
            <div class="menu-text">
                <h2>Memoria M√°gica</h2>
                <p>¬°Entrena tu cerebro!</p>
            </div>
        </div>

        <div class="menu-card nails-theme" onclick="enterGame('salon')">
            <div class="menu-icon">üíÖ</div>
            <div class="menu-text">
                <h2>Sal√≥n de U√±as</h2>
                <p>Pinta y decora con unicornios</p>
            </div>
        </div>
    </div>

    <div id="memory-game" class="screen-container">
        <header>
            <button class="back-btn" onclick="goBack()">‚¨Ö Volver</button>
            <h1>MEMORIA</h1>
            <div style="width:50px"></div>
        </header>
        <div id="memory-board"></div>
        
        <div id="diff-overlay">
            <h2 style="color:white; margin-bottom: 20px;">ELIGE TU RETO</h2>
            <button class="btn-game btn-neon-blue" onclick="startMemory('medium')">Normal (16)</button>
            <button class="btn-game btn-neon-pink" onclick="startMemory('extreme')">DEMENTE (36)</button>
        </div>
    </div>

    <div id="salon-game" class="screen-container">
        <header>
            <button class="back-btn" onclick="goBack()">‚¨Ö Volver</button>
            <h1 style="color: var(--neon-pink);">SAL√ìN DE U√ëAS</h1>
            <button class="back-btn" onclick="cleanNails()" style="border-color: var(--neon-yellow); color: var(--neon-yellow);">Limpiar</button>
        </header>

        <div id="salon-container">
            <div id="hand-area">
                <div class="hand">
                    <div class="finger"><div class="nail" onclick="paintNail(this)"></div></div>
                    <div class="finger"><div class="nail" onclick="paintNail(this)"></div></div>
                    <div class="finger"><div class="nail" onclick="paintNail(this)"></div></div>
                    <div class="finger"><div class="nail" onclick="paintNail(this)"></div></div>
                    <div class="finger"><div class="nail" onclick="paintNail(this)"></div></div>
                </div>
            </div>

            <div id="tools-panel">
                <div class="tool-label">1. Elige Color Neon</div>
                <div class="tool-row" id="color-palette">
                    </div>
                
                <div class="tool-label" style="margin-top: 10px;">2. Elige Sticker</div>
                <div class="tool-row" id="sticker-palette">
                    <div class="sticker-option" onclick="selectSticker(null)">üö´</div>
                    <div class="sticker-option" onclick="selectSticker('ü¶Ñ')">ü¶Ñ</div>
                    <div class="sticker-option" onclick="selectSticker('üåà')">üåà</div>
                    <div class="sticker-option" onclick="selectSticker('‚≠ê')">‚≠ê</div>
                    <div class="sticker-option" onclick="selectSticker('üíñ')">üíñ</div>
                    <div class="sticker-option" onclick="selectSticker('ü¶ã')">ü¶ã</div>
                    <div class="sticker-option" onclick="selectSticker('üíé')">üíé</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // --- AUDIO MAGICO (Web Audio API) ---
        // ==========================================
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function initAudio() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            document.getElementById('start-audio-btn').style.display = 'none';
            playSound('sparkle');
        }

        function playSound(type) {
            if(audioCtx.state === 'suspended') return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);

            const curr = audioCtx.currentTime;

            if (type === 'pop') { // Sonido burbuja suave
                osc.type = 'sine';
                osc.frequency.setValueAtTime(400, curr);
                osc.frequency.exponentialRampToValueAtTime(800, curr + 0.1);
                gain.gain.setValueAtTime(0.5, curr);
                gain.gain.exponentialRampToValueAtTime(0.01, curr + 0.1);
                osc.start(curr); osc.stop(curr + 0.1);
            } 
            else if (type === 'sparkle') { // Sonido m√°gico
                osc.type = 'triangle';
                // Arpegio r√°pido
                [523, 659, 784, 1046, 1318].forEach((freq, i) => {
                    const o = audioCtx.createOscillator();
                    const g = audioCtx.createGain();
                    o.connect(g); g.connect(audioCtx.destination);
                    o.type = 'sine';
                    o.frequency.value = freq;
                    g.gain.setValueAtTime(0.05, curr + i*0.05);
                    g.gain.exponentialRampToValueAtTime(0.001, curr + i*0.05 + 0.3);
                    o.start(curr + i*0.05); o.stop(curr + i*0.05 + 0.3);
                });
            }
            else if (type === 'paint') { // Sonido "whoosh" suave
                osc.type = 'sine';
                osc.frequency.setValueAtTime(200, curr);
                osc.frequency.linearRampToValueAtTime(100, curr + 0.2);
                gain.gain.setValueAtTime(0.3, curr);
                gain.gain.linearRampToValueAtTime(0, curr + 0.2);
                osc.start(curr); osc.stop(curr + 0.2);
            }
            else if (type === 'win') { // Acorde mayor
                 [523.25, 659.25, 783.99].forEach((f,i) => {
                    const o = audioCtx.createOscillator();
                    const g = audioCtx.createGain();
                    o.connect(g); g.connect(audioCtx.destination);
                    o.type = 'triangle';
                    o.frequency.value = f;
                    g.gain.setValueAtTime(0.1, curr);
                    g.gain.exponentialRampToValueAtTime(0.001, curr+1.5);
                    o.start(curr); o.stop(curr+1.5);
                 });
            }
        }

        // ==========================================
        // --- NAVEGACION ---
        // ==========================================
        function enterGame(game) {
            document.querySelectorAll('.screen-container').forEach(s => s.classList.remove('active'));
            if(game === 'memory') {
                document.getElementById('memory-game').classList.add('active');
                document.getElementById('diff-overlay').style.display = 'flex';
                document.getElementById('memory-board').innerHTML = '';
            } else {
                document.getElementById('salon-game').classList.add('active');
                initSalon();
            }
            playSound('sparkle');
        }

        function goBack() {
            document.querySelectorAll('.screen-container').forEach(s => s.classList.remove('active'));
            document.getElementById('main-menu').classList.add('active');
        }

        // ==========================================
        // --- JUEGO 1: MEMORIA ---
        // ==========================================
        const emojis = ['ü¶Ñ','üåà','üç≠','üç¶','üëë','ü¶ã','üê±','üçÑ','‚≠ê','üåô','üçí','üéÄ','üß∏','üé®','üé™','üß©','üéæ','üé∏'];
        let memState = { first: null, second: null, locked: false, matches: 0, total: 0 };

        function startMemory(diff) {
            document.getElementById('diff-overlay').style.display = 'none';
            const board = document.getElementById('memory-board');
            let cols = 4, rows = 4;
            
            board.className = ''; 
            if(diff === 'extreme') {
                cols = 6; rows = 6;
                board.classList.add('grid-6x6');
                board.style.gridTemplateColumns = `repeat(6, 1fr)`;
            } else {
                board.style.gridTemplateColumns = `repeat(4, 1fr)`;
            }

            memState = { first: null, second: null, locked: false, matches: 0, total: (cols*rows)/2 };
            
            const selection = emojis.slice(0, memState.total);
            const deck = [...selection, ...selection].sort(() => 0.5 - Math.random());
            
            board.innerHTML = '';
            deck.forEach(e => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<div class="card-inner"><div class="card-front">?</div><div class="card-back">${e}</div></div>`;
                card.onclick = () => flipCard(card, e);
                board.appendChild(card);
            });
        }

        function flipCard(card, val) {
            if(memState.locked || card === memState.first || card.classList.contains('flipped')) return;
            
            card.classList.add('flipped');
            playSound('pop');

            if(!memState.first) {
                memState.first = card;
                memState.firstVal = val;
            } else {
                memState.second = card;
                if(memState.firstVal === val) {
                    // Match
                    playSound('sparkle');
                    memState.first = null; memState.second = null;
                    memState.matches++;
                    if(memState.matches === memState.total) setTimeout(() => playSound('win'), 500);
                } else {
                    memState.locked = true;
                    setTimeout(() => {
                        memState.first.classList.remove('flipped');
                        memState.second.classList.remove('flipped');
                        memState.first = null; memState.second = null;
                        memState.locked = false;
                    }, 1000);
                }
            }
        }

        // ==========================================
        // --- JUEGO 2: SAL√ìN DE U√ëAS ---
        // ==========================================
        let currentPaint = '#ff00ff';
        let currentSticker = null;

        function initSalon() {
            const palette = document.getElementById('color-palette');
            palette.innerHTML = '';
            const colors = ['#ff00ff', '#00ffff', '#39ff14', '#bc13fe', '#fff01f', '#ff0055', '#ffffff', '#000000'];
            
            colors.forEach(c => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = c;
                swatch.style.boxShadow = `0 0 10px ${c}`;
                swatch.onclick = () => selectColor(c, swatch);
                palette.appendChild(swatch);
            });
            // Select default
            selectColor(colors[0], palette.children[0]);
        }

        function selectColor(color, el) {
            currentPaint = color;
            currentSticker = null; // Si elige color, desactiva sticker
            document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('selected'));
            el.classList.add('selected');
            document.querySelectorAll('.sticker-option').forEach(s => s.classList.remove('selected'));
            playSound('pop');
        }

        function selectSticker(sticker) {
            currentSticker = sticker;
            document.querySelectorAll('.sticker-option').forEach(s => s.classList.remove('selected'));
            // Highlight sticker button logic could go here
            if(sticker) playSound('pop');
        }

        function paintNail(nail) {
            if(currentSticker) {
                // Poner sticker
                // Limpiar stickers viejos si quieres solo uno, o a√±adir multiples
                // Vamos a poner solo uno central para simpleza
                nail.innerHTML = `<div class="sticker-on-nail">${currentSticker}</div>`;
                playSound('pop');
            } else {
                // Pintar color
                nail.style.backgroundColor = currentPaint;
                nail.style.boxShadow = `0 0 15px ${currentPaint}, inset 0 0 10px rgba(0,0,0,0.2)`;
                playSound('paint');
            }
            
            // Animacion peque√±a
            nail.style.transform = 'scale(0.9)';
            setTimeout(() => nail.style.transform = 'scale(1)', 100);
        }

        function cleanNails() {
            document.querySelectorAll('.nail').forEach(n => {
                n.style.backgroundColor = '#ffeadd';
                n.style.boxShadow = 'inset 0 0 5px rgba(0,0,0,0.2)';
                n.innerHTML = '';
            });
            playSound('paint');
        }

        // ==========================================
        // --- FONDO DE PART√çCULAS ---
        // ==========================================
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();
        
        let particles = [];
        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3;
                this.speedX = (Math.random() - 0.5) * 0.5;
                this.speedY = (Math.random() - 0.5) * 0.5;
                this.color = Math.random() > 0.5 ? '#ff00ff' : '#00ffff';
            }
            update() {
                this.x += this.speedX; this.y += this.speedY;
                if(this.x < 0) this.x = canvas.width;
                if(this.x > canvas.width) this.x = 0;
                if(this.y < 0) this.y = canvas.height;
                if(this.y > canvas.height) this.y = 0;
            }
            draw() {
                ctx.fillStyle = this.color; ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
            }
        }
        
        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            while(particles.length < 50) particles.push(new Particle());
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }
        animate();

    </script>
</body>
</html>